(this["webpackJsonptask-test-react-2"]=this["webpackJsonptask-test-react-2"]||[]).push([[0],{21:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(15),s=n.n(r),o=(n(21),n(5)),i=(n(22),n(4)),l=n(3),u=n(16),d=n.n(u);function j(e){e&&(console.log("service/token setToken ".concat(e.substr(0,10),"...")),localStorage.setItem("token",e))}function b(){return localStorage.getItem("token")}function m(){localStorage.removeItem("token")}var h="https://api-gateway-hackathon.herokuapp.com";console.log("service/api: Base URL is: ".concat(h));var p={baseURL:h,method:"get",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}},g=d.a.create(p);g.interceptors.request.use((function(e){var t=b();return console.log("service/api: interceptor with token ".concat(t)),t&&(e.headers.Authorization="Bearer ".concat(t)),e})),g.interceptors.response.use((function(e){return console.log("res : ",e),e}),(function(e){if(401===e.response.status)throw m(),new Error("Invalid token");throw e}));var O=g,f="/api/authenticationService/";function v(){return!!b()}var x=n(0);function k(e){var t=e.spec,n=e.handleChange,a=e.handleSubmit;return Object(x.jsxs)("div",{className:"col-sm",children:[Object(x.jsx)("h3",{children:t.header}),Object(x.jsxs)("form",{children:[Object(x.jsxs)("div",{className:"form-group text-left",children:[Object(x.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Nom d'utilisateur"}),Object(x.jsx)("input",{type:"username",className:"form-control",id:t.userId,"aria-describedby":"usernameHelp",placeholder:"Entrez votre nom d'utilisateur",value:t.state.username,onChange:n}),Object(x.jsx)("small",{id:"usernameHelp",className:"form-text text-muted",children:"Nom d'utilisateur (pas l'email)"})]}),Object(x.jsxs)("div",{className:"form-group text-left",children:[Object(x.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Mot de passe"}),Object(x.jsx)("input",{type:"password",className:"form-control",id:t.passId,placeholder:"Entrez votre mot de passe",autoComplete:"new-password",value:t.state.password,onChange:n})]}),Object(x.jsx)("div",{className:"form-check"}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:a,children:t.btnValue})]})]})}var N=function(e){var t=e.setIsLoggedIn,n=Object(a.useState)({signinUsername:"",signinPassword:""}),c=Object(o.a)(n,2),r=c[0],s=c[1],u=Object(a.useState)({loginUsername:"",loginPassword:""}),d=Object(o.a)(u,2),b=d[0],m=d[1],h={header:"Sign In",userId:Object.keys(r)[0],state:r,passId:Object.keys(r)[1],btnValue:"Cr\xe9er un compte"},p={header:"Log In",userId:Object.keys(b)[0],state:b,passId:Object.keys(b)[1],btnValue:"Se connecter"};return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)(k,{spec:h,handleChange:function(e){var t=e.target,n=t.id,a=t.value;s((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(i.a)({},n,a))}))},handleSubmit:function(e){e.preventDefault();var n,a,c=r.signinUsername,s=r.signinPassword;(n=c,a=s,O.post("".concat(f,"register"),{username:n,password:a}).then((function(e){var t=e.data.token;return j(t),t}))).then((function(e){alert("Success, your token is: ".concat(e)),t(v())})).catch((function(e){alert("Sorry, there was an error")})),console.log(e)}}),Object(x.jsx)(k,{spec:p,handleChange:function(e){var t=e.target,n=t.id,a=t.value;m((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(i.a)({},n,a))}))},handleSubmit:function(e){e.preventDefault();var n,a,c=b.loginUsername,r=b.loginPassword;(n=c,a=r,console.log("service/authentication login ".concat(n)),console.log("service/authentication login ".concat(a)),O.post("".concat(f,"authenticate"),{username:n,password:a}).then((function(e){var t=e.data.token;return j(t),t}))).then((function(e){alert("Success, your token is: ".concat(e)),t(v())})).catch((function(e){alert("Sorry, there was an error")})),console.log(e)}})]})})};var S=function(){var e=function(e){return e.toISOString().slice(0,19)},t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return new Date(new Date(e).setHours(e.getHours()+t))},n=new Date,c=t(n,1),r=Object(a.useState)({taskName:"",dateStart:e(n),dateEnd:e(c)}),s=Object(o.a)(r,2),u=s[0],d=s[1],j=function(n){var a=n.target,c=a.id,r=a.value;if(d((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(i.a)({},c,r))})),"dateStart"===c){var s=e(t(new Date(r)));d((function(e){return Object(l.a)(Object(l.a)({},e),{},{dateEnd:s})})),console.log(s)}};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:"Home"}),Object(x.jsxs)("div",{className:"col-sm",children:[Object(x.jsx)("h3",{children:"Ajouter une t\xe2che"}),Object(x.jsxs)("form",{children:[Object(x.jsxs)("div",{className:"form-group text-left",children:[Object(x.jsx)("label",{htmlFor:"inputTache",children:"T\xe2che"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"taskName","aria-describedby":"taskNameHelp",placeholder:"Entrez une t\xe2che",value:u.taskName,onChange:j})]}),Object(x.jsxs)("div",{className:"form-group text-left",children:[Object(x.jsx)("label",{htmlFor:"inputStart",children:"Date de d\xe9but"}),Object(x.jsx)("input",{type:"datetime-local",className:"form-control",id:"dateStart",placeholder:"Entrez date de d\xe9but",min:u.dateStart,max:"2022-06-01T00:00",value:u.dateStart,onChange:j})]}),Object(x.jsxs)("div",{className:"form-group text-left",children:[Object(x.jsx)("label",{htmlFor:"inputEnd",children:"Date de fin"}),Object(x.jsx)("input",{type:"datetime-local",className:"form-control",id:"dateEnd",placeholder:"Entrez date de fin",min:u.dateEnd,max:"2022-06-01T00:00",value:u.dateEnd,onChange:j})]}),Object(x.jsx)("div",{className:"form-check"}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:function(e){e.preventDefault();var t=u.taskName,n=u.dateStart,a=u.dateEnd;""===t&&console.log("unknown"),console.log(n),console.log(a)},children:"Ajout de la t\xe2che"})]})]}),Object(x.jsx)("p",{children:"List of Tasks comes here"})]})};var w=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1];return n?Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("button",{className:"btn btn-primary",onClick:function(){m(),c(!1)},children:"Log Out"}),Object(x.jsx)(S,{isLoggedIn:n})]}):Object(x.jsx)(N,{setIsLoggedIn:c})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(w,{})}),document.getElementById("root")),y()}},[[42,1,2]]]);
//# sourceMappingURL=main.cc88824d.chunk.js.map