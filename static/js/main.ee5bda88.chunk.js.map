{"version":3,"sources":["service/token.jsx","service/api.jsx","components/Account.js","service/task.jsx","components/AllTask.js","components/TaskByUserId.js","components/Home.js","App.js","reportWebVitals.js","index.js"],"names":["getToken","localStorage","getItem","removeToken","removeItem","REACT_APP_API_BASE_URL","console","log","defaultOptions","baseURL","method","headers","api","axios","create","interceptors","request","use","config","token","Authorization","response","res","err","status","Error","Account","AllTask","tasks","useState","taskById","setTaskById","modalRef","useRef","handleClick","id","get","then","data","getTaskById","length","map","e","i","onClick","data-bs-toggle","data-bs-target","name","start","end","className","ref","tabIndex","aria-labelledby","aria-hidden","type","data-bs-dismiss","aria-label","TaskByUserId","Home","btn","setBtn","setTasks","reReReFormatTime","date","toISOString","slice","addOneHour","toAdd","Date","setHours","getHours","frDate","onHourLater","taskName","dateStart","dateEnd","state","setState","handleChange","target","value","prevState","removeT","replace","useEffect","a","fetchTask","htmlFor","aria-describedby","placeholder","onChange","min","max","preventDefault","t","ds","de","post","App","isLoggedIn","setIsLoggedIn","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ee5bda88.chunk.js","sourcesContent":["function setToken(token) {\n  if (token) {\n    console.log(`service/token setToken ${token.substr(0, 10)}...`);\n    localStorage.setItem(\"token\", token);\n  }\n}\n\nfunction getToken() {\n  return localStorage.getItem(\"token\");\n}\n\nfunction removeToken() {\n  localStorage.removeItem(\"token\");\n}\n\nexport { setToken, getToken, removeToken };\n","import axios from \"axios\";\n\nimport { getToken, removeToken } from \"./token\";\n\nconst REACT_APP_API_BASE_URL = \"https://api-gateway-hackathon.herokuapp.com\";\n\nconsole.log(`service/api: Base URL is: ${REACT_APP_API_BASE_URL}`);\n\nconst defaultOptions = {\n  baseURL: REACT_APP_API_BASE_URL,\n  method: \"get\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n    \"Access-Control-Allow-Origin\": \"*\",\n  },\n};\nconst api = axios.create(defaultOptions);\n\n// Set the AUTH token for any request\napi.interceptors.request.use((config) => {\n  const token = getToken();\n  console.log(`service/api: interceptor with token ${token}`);\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\napi.interceptors.response.use(\n  (res) => {\n    console.log(\"res : \", res);\n    return res;\n  },\n  (err) => {\n    if (err.response.status === 401) {\n      removeToken();\n      throw new Error(`Invalid token`);\n    }\n    throw err;\n  }\n);\n\nexport default api;\n","import { useState } from \"react\";\nimport { register, login, isUserLoggedIn } from \"../service/authentication\";\n\nimport Form from \"./Form\";\n\nfunction Account({ setIsLoggedIn }) {\n  const [signinState, setSigninState] = useState({\n    signinUsername: \"\",\n    signinPassword: \"\",\n  });\n\n  const [loginState, setLoginState] = useState({\n    loginUsername: \"\",\n    loginPassword: \"\",\n  });\n\n  const handleChangeSignin = (e) => {\n    const { id, value } = e.target;\n    setSigninState((prevState) => ({\n      ...prevState,\n      [id]: value,\n    }));\n  };\n\n  const handleChangeLogin = (e) => {\n    const { id, value } = e.target;\n    setLoginState((prevState) => ({\n      ...prevState,\n      [id]: value,\n    }));\n  };\n\n  const handleSubmitSignin = (e) => {\n    e.preventDefault();\n    const { signinUsername, signinPassword } = signinState;\n    register(signinUsername, signinPassword)\n      .then((token) => {\n        alert(`Success, your token is: ${token}`);\n        setIsLoggedIn(isUserLoggedIn());\n      })\n      .catch((error) => {\n        alert(`Sorry, there was an error`);\n      });\n    console.log(e);\n  };\n\n  const handleSubmitLogin = (e) => {\n    e.preventDefault();\n    const { loginUsername, loginPassword } = loginState;\n    login(loginUsername, loginPassword)\n      .then((token) => {\n        alert(`Success, your token is: ${token}`);\n        setIsLoggedIn(isUserLoggedIn());\n      })\n      .catch((error) => {\n        alert(`Sorry, there was an error`);\n      });\n    console.log(e);\n  };\n\n  const signSpec = {\n    header: \"Sign In\",\n    userId: Object.keys(signinState)[0],\n    state: signinState,\n    passId: Object.keys(signinState)[1],\n    btnValue: \"Créer un compte\",\n  };\n\n  const logSpec = {\n    header: \"Log In\",\n    userId: Object.keys(loginState)[0],\n    state: loginState,\n    passId: Object.keys(loginState)[1],\n    btnValue: \"Se connecter\",\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <Form\n          spec={signSpec}\n          handleChange={handleChangeSignin}\n          handleSubmit={handleSubmitSignin}\n        />\n        <Form\n          spec={logSpec}\n          handleChange={handleChangeLogin}\n          handleSubmit={handleSubmitLogin}\n        />\n      </div>\n    </div>\n  );\n}\nexport default Account;\n","import api from \"./api\";\n\nconst baseURL = \"/api/taskService/\";\n\nfunction sendTask(t, ds, de) {\n  return api\n    .post(`${baseURL}tasks`, {\n      name: t,\n      start: ds,\n      end: de,\n    })\n    .then((response) => {\n      return response.data;\n    });\n}\n\nfunction getTaskById(id) {\n  return api.get(`${baseURL}tasks/${id}`).then((response) => {\n    return response.data;\n  });\n}\n\nexport { sendTask, getTaskById };\n","import { useRef, useState } from \"react\";\nimport { getTaskById } from \"../service/task\";\n// import \"jquery/dist/jquery.js\";\n// import \"bootstrap/dist/js/bootstrap.bundle.js\";\n\nfunction AllTask({ tasks }) {\n  const [taskById, setTaskById] = useState({});\n  const modalRef = useRef(null);\n\n  const handleClick = (id) => {\n    getTaskById(id).then((response) => {\n      console.log(\"response \", response);\n      setTaskById(response);\n    });\n  };\n\n  return (\n    <>\n      <ul>\n        {tasks.length ? (\n          tasks.map((e, i) => (\n            <li\n              key={i}\n              onClick={() => handleClick(e.id)}\n              data-bs-toggle=\"modal\"\n              data-bs-target=\"#exampleModal\"\n            >\n              the task : <b>{e.name}</b> starts at <b>{e.start}</b> and ends at{\" \"}\n              <b>{e.end}</b>\n            </li>\n          ))\n        ) : (\n          <p>No tasks</p>\n        )}\n      </ul>\n\n      <div\n        className=\"modal fade\"\n        ref={modalRef}\n        id=\"exampleModal\"\n        tabIndex=\"-1\"\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n      >\n        <div className=\"modal-dialog\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\" id=\"exampleModalLabel\">\n                {taskById.name}\n              </h5>\n              <button\n                type=\"button\"\n                className=\"btn-close\"\n                data-bs-dismiss=\"modal\"\n                aria-label=\"Close\"\n              ></button>\n            </div>\n            <div className=\"modal-body\">\n              <p>Date début : {taskById.start}</p>\n              <p>Date fin : {taskById.end}</p>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary\"\n                data-bs-dismiss=\"modal\"\n              >\n                Fermer\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default AllTask;\n","function TaskByUserId() {\n  return <p>TaskByUserId is to come</p>;\n}\n\nexport default TaskByUserId;\n","import { useEffect, useState } from \"react\";\nimport { sendTask } from \"../service/task\";\nimport axios from \"axios\";\n\nimport AllTask from \"./AllTask\";\nimport TaskByUserId from \"./TaskByUserId\";\n\nfunction Home() {\n  const [btn, setBtn] = useState(false);\n  const btns = [\"Liste de tâches\", \"Mes tâches\"];\n\n  const [tasks, setTasks] = useState([]);\n\n  const reReReFormatTime = (date) => date.toISOString().slice(0, 19);\n  const addOneHour = (date, toAdd = 3) =>\n    new Date(new Date(date).setHours(date.getHours() + toAdd));\n\n  const frDate = new Date();\n  const onHourLater = addOneHour(frDate, 1);\n\n  // expected output: locale time under following format : yyyy-MM-ddTHH:mm:ss\n\n  const [state, setState] = useState({\n    taskName: \"\",\n    dateStart: reReReFormatTime(frDate),\n    dateEnd: reReReFormatTime(onHourLater),\n  });\n\n  const handleChange = (e) => {\n    const { id, value } = e.target;\n    setState((prevState) => ({\n      ...prevState,\n      [id]: value,\n    }));\n\n    if (id === \"dateStart\") {\n      let res = reReReFormatTime(addOneHour(new Date(value)));\n      setState((prevState) => ({\n        ...prevState,\n        dateEnd: res,\n      }));\n      console.log(res);\n    }\n  };\n\n  const removeT = (date) => {\n    return date.replace(\"T\", \" \");\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const { taskName, dateStart, dateEnd } = state;\n\n    sendTask(taskName, removeT(dateStart), removeT(dateEnd)).then((data) => {\n      setTasks((prevState) => [...prevState, data]);\n    });\n  };\n\n  useEffect(() => {\n    const fetchTask = async () => {\n      const response = await axios(\n        \"https://api-gateway-hackathon.herokuapp.com/api/taskService/tasks\"\n      );\n      setTasks(response.data);\n    };\n    fetchTask();\n  }, []);\n\n  return (\n    <>\n      <p>Home</p>\n      <div className=\"col-sm\">\n        <h3>Ajouter une tâche</h3>\n        <form>\n          <div className=\"form-group text-left\">\n            <label htmlFor=\"inputTache\">Tâche</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              id=\"taskName\"\n              aria-describedby=\"taskNameHelp\"\n              placeholder=\"Entrez une tâche\"\n              value={state.taskName}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-group text-left\">\n            <label htmlFor=\"inputStart\">Date de début</label>\n            <input\n              type=\"datetime-local\"\n              className=\"form-control\"\n              id=\"dateStart\"\n              placeholder=\"Entrez date de début\"\n              min={state.dateStart}\n              max=\"2022-06-01T00:00\"\n              value={state.dateStart}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-group text-left\">\n            <label htmlFor=\"inputEnd\">Date de fin</label>\n            <input\n              type=\"datetime-local\"\n              className=\"form-control\"\n              id=\"dateEnd\"\n              placeholder=\"Entrez date de fin\"\n              min={state.dateEnd}\n              max=\"2022-06-01T00:00\"\n              value={state.dateEnd}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-check\"></div>\n          <button\n            type=\"submit\"\n            className=\"btn btn-primary btn-block\"\n            onClick={handleSubmit}\n          >\n            Ajout de la tâche\n          </button>\n        </form>\n      </div>\n\n      <div className=\"container mt-1\">\n        {btns.map((e, i) => (\n          <button\n            type=\"button\"\n            className=\"btn btn-primary mr-1\"\n            key={i}\n            onClick={() => setBtn(!btn)}\n          >\n            {e}\n          </button>\n        ))}\n\n        {!btn ? <AllTask tasks={tasks} /> : <TaskByUserId />}\n      </div>\n    </>\n  );\n}\n\nexport default Home;\n","import { useState } from \"react\";\n// import \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport Account from \"./components/Account\";\nimport Home from \"./components/Home\";\n\nimport { removeToken } from \"./service/token\";\n\nfunction App() {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  const handleLogout = () => {\n    removeToken();\n    setIsLoggedIn(false);\n  };\n\n  // if (!isLoggedIn) {\n  //   return <Account setIsLoggedIn={setIsLoggedIn} />;\n  // }\n\n  return (\n    <div className=\"App\">\n      <button className=\"btn btn-primary\" onClick={handleLogout}>\n        Log Out\n      </button>\n      <Home isLoggedIn={isLoggedIn} />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}