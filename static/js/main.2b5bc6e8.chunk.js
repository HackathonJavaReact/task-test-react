(this["webpackJsonptask-test-react-2"]=this["webpackJsonptask-test-react-2"]||[]).push([[0],{10:function(e,t,a){"use strict";function n(e){e&&(console.log("service/token setToken ".concat(e.substr(0,10),"...")),localStorage.setItem("token",e))}function c(){return localStorage.getItem("token")}function s(){localStorage.removeItem("token")}a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return s}))},12:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l}));var n=a(9),c=a(10),s="/api/authenticationService/";function r(e,t){return n.a.post("".concat(s,"authenticate"),{username:e,password:t}).then((function(e){var t=e.data.token;return Object(c.c)(t),t}))}function o(e,t){return n.a.post("".concat(s,"register"),{username:e,password:t}).then((function(e){var t=e.data.token;return Object(c.c)(t),t}))}function i(){return!!Object(c.a)()}function l(){return n.a.get("".concat(s,"isAuthenticated")).then((function(e){return e}))}},34:function(e,t,a){},37:function(e,t,a){"use strict";(function(e){var n=a(4),c=a(1),s=a(43),r=a(41),o=a(10),i=a(12),l=a(40),d=a(0);t.a=function(){var t=Object(c.useState)(!1),a=Object(n.a)(t,2),u=a[0],b=a[1],j=Object(c.useState)(!1),m=Object(n.a)(j,2),h=m[0],O=m[1];return Object(c.useEffect)((function(){Object(i.a)().then((function(e){return O(e.data)}))})),console.log(e),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/task-test-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})),h?Object(d.jsxs)("div",{className:"container-fluid pt-2",children:[Object(d.jsx)("button",{className:"btn btn-primary mr-2",onClick:function(){Object(o.b)(),b(!1),Object(l.a)(),Object(i.a)().then((function(e){return O(e.data)}))},children:"Log Out"}),Object(d.jsx)(r.a,{isLoggedIn:u})]}):Object(d.jsx)(s.a,{setIsLoggedIn:b,setIsAuth:O})}}).call(this,a(25))},40:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(9);function c(){n.a.post("/logout")}},41:function(e,t,a){"use strict";var n=a(22),c=a.n(n),s=a(38),r=a(42),o=a(13),i=a(11),l=a(4),d=a(1),u=a(9),b="/api/compose/";function j(e){return u.a.get("".concat("/api/taskService/","tasks/").concat(e)).then((function(e){return e.data}))}var m=a(18),h=a.n(m),O=(a(34),a(0));var f=function(e){var t=e.tasks,a=Object(d.useState)({}),n=Object(l.a)(a,2),c=n[0],s=n[1],r=Object(d.useRef)(null);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("ul",{className:"",children:t.length?t.map((function(e,t){return Object(O.jsxs)("li",{onClick:function(){j(e.id).then((function(e){s(e)}))},"data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:["the task : ",Object(O.jsx)("b",{children:e.name})," starts at ",Object(O.jsx)("b",{children:e.start})," and ends at"," ",Object(O.jsx)("b",{children:e.end})]},t)})):Object(O.jsx)("p",{children:"No tasks"})}),Object(O.jsx)("div",{className:"modal fade",ref:r,id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(O.jsx)("div",{className:"modal-dialog",children:Object(O.jsxs)("div",{className:"modal-content",children:[Object(O.jsxs)("div",{className:"modal-header",children:[Object(O.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:c.name}),Object(O.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(O.jsxs)("div",{className:"modal-body",children:[Object(O.jsxs)("p",{children:["Date d\xe9but : ",c.start]}),Object(O.jsxs)("p",{children:["Date fin : ",c.end]})]}),Object(O.jsx)("div",{className:"modal-footer",children:Object(O.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Fermer"})})]})})})]})};var p=function(){var e=Object(d.useState)([]),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(d.useState)({}),s=Object(l.a)(c,2),r=s[0],o=s[1],i=Object(d.useRef)(null);return Object(d.useEffect)((function(){u.a.get("".concat(b,"user/tasks")).then((function(e){return e.data})).then((function(e){n(e)}))}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("ul",{className:"",children:a.length?a.map((function(e,t){return Object(O.jsxs)("li",{onClick:function(){j(e.id).then((function(e){o(e)}))},"data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:["the task : ",Object(O.jsx)("b",{children:e.name})," starts at ",Object(O.jsx)("b",{children:e.start})," and ends at"," ",Object(O.jsx)("b",{children:e.end})]},t)})):Object(O.jsx)("p",{children:"No tasks"})}),Object(O.jsx)("div",{className:"modal fade",ref:i,id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(O.jsx)("div",{className:"modal-dialog",children:Object(O.jsxs)("div",{className:"modal-content",children:[Object(O.jsxs)("div",{className:"modal-header",children:[Object(O.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:r.name}),Object(O.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(O.jsxs)("div",{className:"modal-body",children:[Object(O.jsxs)("p",{children:["Date d\xe9but : ",r.start]}),Object(O.jsxs)("p",{children:["Date fin : ",r.end]})]}),Object(O.jsx)("div",{className:"modal-footer",children:Object(O.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Fermer"})})]})})})]})},x=a(19),v=a(2);t.a=function(){var e=Object(d.useState)([]),t=Object(l.a)(e,2),a=t[0],n=t[1],j=function(e){return e.toISOString().slice(0,19)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return new Date(new Date(e).setHours(e.getHours()+t))},g=new Date,k=m(g,1),N=Object(d.useState)({taskName:"",dateStart:j(g),dateEnd:j(k)}),S=Object(l.a)(N,2),y=S[0],w=S[1],I=function(e){var t=e.target,a=t.id,n=t.value;if(w((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},a,n))})),"dateStart"===a){var c=j(m(new Date(n)));w((function(e){return Object(i.a)(Object(i.a)({},e),{},{dateEnd:c})}))}},C=function(e){return e.replace("T"," ")};return Object(d.useEffect)((function(){(function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h()("https://api-gateway-hackathon.herokuapp.com/api/taskService/tasks");case 2:t=e.sent,n(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("p",{children:"Home"}),Object(O.jsxs)("div",{className:"col-sm mb-3 pb-3 border-bottom border-2",children:[Object(O.jsx)("h3",{children:"Ajouter une t\xe2che"}),Object(O.jsxs)("form",{children:[Object(O.jsxs)("div",{className:"form-group text-left",children:[Object(O.jsx)("label",{htmlFor:"inputTache",children:"T\xe2che"}),Object(O.jsx)("input",{type:"text",className:"form-control",id:"taskName","aria-describedby":"taskNameHelp",placeholder:"Entrez une t\xe2che",value:y.taskName,onChange:I})]}),Object(O.jsxs)("div",{className:"form-group text-left",children:[Object(O.jsx)("label",{htmlFor:"inputStart",children:"Date de d\xe9but"}),Object(O.jsx)("input",{type:"datetime-local",className:"form-control",id:"dateStart",placeholder:"Entrez date de d\xe9but",min:y.dateStart,max:"2022-06-01T00:00",value:y.dateStart,onChange:I})]}),Object(O.jsxs)("div",{className:"form-group text-left",children:[Object(O.jsx)("label",{htmlFor:"inputEnd",children:"Date de fin"}),Object(O.jsx)("input",{type:"datetime-local",className:"form-control",id:"dateEnd",placeholder:"Entrez date de fin",min:y.dateEnd,max:"2022-06-01T00:00",value:y.dateEnd,onChange:I})]}),Object(O.jsx)("div",{className:"form-check"}),Object(O.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:function(e){e.preventDefault();var t,a,c,s=y.taskName,o=y.dateStart,i=y.dateEnd;(t=s,a=C(o),c=C(i),u.a.post("".concat(b,"task"),{name:t,start:a,end:c}).then((function(e){return e.data}),(function(e){500===e.response.status&&console.log(e)}))).then((function(e){n((function(t){return[].concat(Object(r.a)(t),[e])}))}))},children:"Ajout de la t\xe2che"})]})]}),Object(O.jsxs)(x.a,{children:[Object(O.jsx)(x.b,{to:"/task-test-react/",children:Object(O.jsx)("button",{className:"btn btn-primary",children:"Toutes les T\xe2ches"})}),Object(O.jsx)(x.b,{to:"/task-test-react/mytasks",children:Object(O.jsx)("button",{className:"btn btn-primary",children:"Mes T\xe2ches"})}),Object(O.jsxs)(v.c,{children:[Object(O.jsx)(v.a,{exact:!0,path:"/task-test-react/",children:Object(O.jsx)(f,{tasks:a})}),Object(O.jsx)(v.a,{path:"/task-test-react/mytasks",children:Object(O.jsx)(p,{})})]})]})]})}},43:function(e,t,a){"use strict";var n=a(13),c=a(11),s=a(4),r=a(1),o=a(12),i=a(0);function l(e){var t=e.spec,a=e.handleChange,n=e.handleSubmit;return Object(i.jsxs)("div",{className:"col-sm",children:[Object(i.jsx)("h3",{children:t.header}),Object(i.jsxs)("form",{children:[Object(i.jsxs)("div",{className:"form-group text-left",children:[Object(i.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Nom d'utilisateur"}),Object(i.jsx)("input",{type:"username",className:"form-control",id:t.userId,"aria-describedby":"usernameHelp",placeholder:"Entrez votre nom d'utilisateur",value:t.state.username,onChange:a}),Object(i.jsx)("small",{id:"usernameHelp",className:"form-text text-muted",children:"Nom d'utilisateur (pas l'email)"})]}),Object(i.jsxs)("div",{className:"form-group text-left",children:[Object(i.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Mot de passe"}),Object(i.jsx)("input",{type:"password",className:"form-control",id:t.passId,placeholder:"Entrez votre mot de passe",autoComplete:"new-password",value:t.state.password,onChange:a})]}),Object(i.jsx)("div",{className:"form-check"}),Object(i.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:n,children:t.btnValue})]})]})}t.a=function(e){var t=e.setIsLoggedIn,a=e.setIsAuth,d=Object(r.useState)({signinUsername:"",signinPassword:""}),u=Object(s.a)(d,2),b=u[0],j=u[1],m=Object(r.useState)({loginUsername:"",loginPassword:""}),h=Object(s.a)(m,2),O=h[0],f=h[1],p={header:"Sign In",userId:Object.keys(b)[0],state:b,passId:Object.keys(b)[1],btnValue:"Cr\xe9er un compte"},x={header:"Log In",userId:Object.keys(O)[0],state:O,passId:Object.keys(O)[1],btnValue:"Se connecter"};return Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)(l,{spec:p,handleChange:function(e){var t=e.target,a=t.id,s=t.value;j((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(n.a)({},a,s))}))},handleSubmit:function(e){e.preventDefault();var n=b.signinUsername,c=b.signinPassword;Object(o.d)(n,c).then((function(e){alert("Success, your token is: ".concat(e)),t(Object(o.b)())})).catch((function(e){alert("Sorry, there was an error")})),Object(o.a)().then((function(e){return a(e.data)}))}}),Object(i.jsx)(l,{spec:x,handleChange:function(e){var t=e.target,a=t.id,s=t.value;f((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(n.a)({},a,s))}))},handleSubmit:function(e){e.preventDefault();var n=O.loginUsername,c=O.loginPassword;Object(o.c)(n,c).then((function(e){alert("Success, your token is: ".concat(e)),t(Object(o.b)())})).catch((function(e){alert("Sorry, there was an error")})),Object(o.a)().then((function(e){return a(e.data)}))}})]})})}},48:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(36),r=a.n(s),o=(a(48),a(37)),i=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,74)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))},l=a(0);r.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(o.a,{})}),document.getElementById("root")),i()},9:function(e,t,a){"use strict";var n=a(18),c=a.n(n),s=a(10),r={baseURL:"https://api-gateway-hackathon.herokuapp.com",method:"get",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}},o=c.a.create(r);o.interceptors.request.use((function(e){var t=Object(s.a)();return console.log("interceptors request with token ".concat(t)),t&&(e.headers.Authorization="Bearer ".concat(t)),e})),o.interceptors.response.use((function(e){return console.log("interceptors response : ",e),e}),(function(e){if(401===e.response.status)throw Object(s.b)(),new Error("Invalid token");throw e})),t.a=o}},[[73,1,2]]]);
//# sourceMappingURL=main.2b5bc6e8.chunk.js.map