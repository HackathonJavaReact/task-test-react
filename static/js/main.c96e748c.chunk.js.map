{"version":3,"sources":["service/token.jsx","service/api.jsx","service/authentication.jsx","components/Form.js","components/Account.js","components/Home.js","service/task.jsx","App.js","reportWebVitals.js","index.js"],"names":["setToken","token","console","log","substr","localStorage","setItem","getToken","getItem","removeToken","removeItem","REACT_APP_API_BASE_URL","defaultOptions","baseURL","method","headers","api","axios","create","interceptors","request","use","config","Authorization","response","res","err","status","Error","isUserLoggedIn","Form","spec","handleChange","handleSubmit","className","header","htmlFor","type","id","userId","aria-describedby","placeholder","value","state","username","onChange","passId","autoComplete","password","onClick","btnValue","Account","setIsLoggedIn","useState","signinUsername","signinPassword","signinState","setSigninState","loginUsername","loginPassword","loginState","setLoginState","signSpec","Object","keys","logSpec","e","target","prevState","preventDefault","post","then","data","alert","catch","error","Home","now","Date","toISOString","taskName","dateStart","dateEnd","setState","min","max","t","ds","de","App","isLoggedIn","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"oPAAA,SAASA,EAASC,GACZA,IACFC,QAAQC,IAAR,iCAAsCF,EAAMG,OAAO,EAAG,IAAtD,QACAC,aAAaC,QAAQ,QAASL,IAIlC,SAASM,IACP,OAAOF,aAAaG,QAAQ,SAG9B,SAASC,IACPJ,aAAaK,WAAW,SCR1B,IAAMC,EAAyB,8CAE/BT,QAAQC,IAAR,oCAAyCQ,IAEzC,IAAMC,EAAiB,CACrBC,QAASF,EACTG,OAAQ,MACRC,QAAS,CACP,eAAgB,mBAChB,8BAA+B,MAG7BC,EAAMC,IAAMC,OAAON,GAGzBI,EAAIG,aAAaC,QAAQC,KAAI,SAACC,GAC5B,IAAMrB,EAAQM,IAKd,OAJAL,QAAQC,IAAR,8CAAmDF,IAC/CA,IACFqB,EAAOP,QAAQQ,cAAf,iBAAyCtB,IAEpCqB,KAGTN,EAAIG,aAAaK,SAASH,KACxB,SAACI,GAEC,OADAvB,QAAQC,IAAI,SAAUsB,GACfA,KAET,SAACC,GACC,GAA4B,MAAxBA,EAAIF,SAASG,OAEf,MADAlB,IACM,IAAImB,MAAJ,iBAER,MAAMF,KAIKV,QCvCTH,EAAU,8BAkChB,SAASgB,IACP,QAAStB,I,WCtCI,SAASuB,EAAT,GAAqD,IAArCC,EAAoC,EAApCA,KAAMC,EAA8B,EAA9BA,aAAcC,EAAgB,EAAhBA,aACjD,OACE,sBAAKC,UAAU,SAAf,UACE,6BAAKH,EAAKI,SACV,iCACE,sBAAKD,UAAU,uBAAf,UACE,uBAAOE,QAAQ,qBAAf,+BACA,uBACEC,KAAK,WACLH,UAAU,eACVI,GAAIP,EAAKQ,OACTC,mBAAiB,eACjBC,YAAY,iCACZC,MAAOX,EAAKY,MAAMC,SAClBC,SAAUb,IAEZ,uBAAOM,GAAG,eAAeJ,UAAU,uBAAnC,gDAIF,sBAAKA,UAAU,uBAAf,UACE,uBAAOE,QAAQ,wBAAf,0BACA,uBACEC,KAAK,WACLH,UAAU,eACVI,GAAIP,EAAKe,OACTL,YAAY,4BACZM,aAAa,eACbL,MAAOX,EAAKY,MAAMK,SAClBH,SAAUb,OAGd,qBAAKE,UAAU,eACf,wBACEG,KAAK,SACLH,UAAU,4BACVe,QAAShB,EAHX,SAKGF,EAAKmB,iBCuDDC,MAxFf,YAAqC,IAAlBC,EAAiB,EAAjBA,cAAiB,EACIC,mBAAS,CAC7CC,eAAgB,GAChBC,eAAgB,KAHgB,mBAC3BC,EAD2B,KACdC,EADc,OAMEJ,mBAAS,CAC3CK,cAAe,GACfC,cAAe,KARiB,mBAM3BC,EAN2B,KAMfC,EANe,KAuD5BC,EAAW,CACf3B,OAAQ,UACRI,OAAQwB,OAAOC,KAAKR,GAAa,GACjCb,MAAOa,EACPV,OAAQiB,OAAOC,KAAKR,GAAa,GACjCN,SAAU,sBAGNe,EAAU,CACd9B,OAAQ,SACRI,OAAQwB,OAAOC,KAAKJ,GAAY,GAChCjB,MAAOiB,EACPd,OAAQiB,OAAOC,KAAKJ,GAAY,GAChCV,SAAU,gBAGZ,OACE,qBAAKhB,UAAU,YAAf,SACE,sBAAKA,UAAU,MAAf,UACE,cAACJ,EAAD,CACEC,KAAM+B,EACN9B,aAjEmB,SAACkC,GAAO,IAAD,EACVA,EAAEC,OAAhB7B,EADwB,EACxBA,GAAII,EADoB,EACpBA,MACZe,GAAe,SAACW,GAAD,mBAAC,eACXA,GADU,kBAEZ9B,EAAKI,QA8DFT,aAlDmB,SAACiC,GAC1BA,EAAEG,iBAD8B,IFRlBzB,EAAUI,EEUhBM,EAAmCE,EAAnCF,eAAgBC,EAAmBC,EAAnBD,gBFVVX,EEWLU,EFXeN,EEWCO,EFVpBvC,EACJsD,KADI,UACIzD,EADJ,YACuB,CAC1B+B,SAAUA,EACVI,SAAUA,IAEXuB,MAAK,SAAC/C,GACL,IAAMvB,EAAQuB,EAASgD,KAAKvE,MAE5B,OADAD,EAASC,GACFA,MEGNsE,MAAK,SAACtE,GACLwE,MAAM,2BAAD,OAA4BxE,IACjCmD,EAAcvB,QAEf6C,OAAM,SAACC,GACNF,MAAM,gCAEVvE,QAAQC,IAAI+D,MAyCR,cAACpC,EAAD,CACEC,KAAMkC,EACNjC,aA9DkB,SAACkC,GAAO,IAAD,EACTA,EAAEC,OAAhB7B,EADuB,EACvBA,GAAII,EADmB,EACnBA,MACZmB,GAAc,SAACO,GAAD,mBAAC,eACVA,GADS,kBAEX9B,EAAKI,QA2DFT,aAzCkB,SAACiC,GACzBA,EAAEG,iBAD6B,IFzCpBzB,EAAUI,EE2CbU,EAAiCE,EAAjCF,cAAeC,EAAkBC,EAAlBD,eF3CZf,EE4CLc,EF5CeV,EE4CAW,EF3CvBzD,QAAQC,IAAR,uCAA4CyC,IAC5C1C,QAAQC,IAAR,uCAA4C6C,IACrChC,EACJsD,KADI,UACIzD,EADJ,gBAC2B,CAC9B+B,SAAUA,EACVI,SAAUA,IAEXuB,MAAK,SAAC/C,GACL,IAAMvB,EAAQuB,EAASgD,KAAKvE,MAE5B,OADAD,EAASC,GACFA,MEkCNsE,MAAK,SAACtE,GACLwE,MAAM,2BAAD,OAA4BxE,IACjCmD,EAAcvB,QAEf6C,OAAM,SAACC,GACNF,MAAM,gCAEVvE,QAAQC,IAAI+D,YCoCDU,MA1Ff,WACE,IAAIC,GAAM,IAAIC,MAAOC,cAErB7E,QAAQC,IAAI0E,GAHE,MAKYxB,mBAAS,CACjC2B,SAAU,GACVC,WAAW,IAAIH,MAAOC,cACtBG,QAAS,qBARG,mBAKPvC,EALO,KAKAwC,EALA,KAWRnD,EAAe,SAACkC,GAAO,IAAD,EACJA,EAAEC,OAAhB7B,EADkB,EAClBA,GAAII,EADc,EACdA,MACZyC,GAAS,SAACf,GAAD,mBAAC,eACLA,GADI,kBAEN9B,EAAKI,QAeV,OACE,qCACE,qCACA,sBAAKR,UAAU,SAAf,UACE,sDACA,iCACE,sBAAKA,UAAU,uBAAf,UACE,uBAAOE,QAAQ,aAAf,sBACA,uBACEC,KAAK,OACLH,UAAU,eACVI,GAAG,WACHE,mBAAiB,eACjBC,YAAY,sBACZC,MAAOC,EAAMqC,SACbnC,SAAUb,OAGd,sBAAKE,UAAU,uBAAf,UACE,uBAAOE,QAAQ,aAAf,8BACA,uBACEC,KAAK,iBACLH,UAAU,eACVI,GAAG,YACHG,YAAY,0BACZ2C,IAAKzC,EAAMsC,UACXI,IAAI,mBACJ3C,MAAOC,EAAMsC,UACbpC,SAAUb,OAGd,sBAAKE,UAAU,uBAAf,UACE,uBAAOE,QAAQ,WAAf,yBACA,uBACEC,KAAK,iBACLH,UAAU,eACVI,GAAG,UACHG,YAAY,qBACZ2C,IAAKzC,EAAMuC,QACXG,IAAI,mBACJ3C,MAAOC,EAAMuC,QACbrC,SAAUb,OAGd,qBAAKE,UAAU,eACf,wBACEG,KAAK,SACLH,UAAU,4BACVe,QAxDW,SAACiB,GACpBA,EAAEG,iBADwB,ICvBZiB,EAAGC,EAAIC,EDyBbR,EAAiCrC,EAAjCqC,SAAUC,EAAuBtC,EAAvBsC,UAAWC,EAAYvC,EAAZuC,SCzBfI,ED0BLN,EC1BQO,ED0BEN,EC1BEO,ED0BSN,ECzBzBlE,EACJsD,KAAK,iBAAkB,CACtBgB,IACAC,KACAC,OAEDjB,MAAK,SAAC/C,GAEL,OADAtB,QAAQC,IAAIqB,EAASgD,MACdhD,EAASgD,SDiBqBD,MAAK,SAACC,QAkDvC,wCAUJ,6DE1DSiB,MAtBf,WAAgB,IAAD,EACuBpC,oBAAS,GADhC,mBACNqC,EADM,KACMtC,EADN,KAQb,OAAKsC,EAKH,sBAAKxD,UAAU,MAAf,UACE,wBAAQA,UAAU,kBAAkBe,QAXnB,WACnBxC,IACA2C,GAAc,IASZ,qBAGA,cAAC,EAAD,CAAMsC,WAAYA,OARb,cAAC,EAAD,CAAStC,cAAeA,KCLpBuC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBtB,MAAK,YAAkD,IAA/CuB,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.c96e748c.chunk.js","sourcesContent":["function setToken(token) {\n  if (token) {\n    console.log(`service/token setToken ${token.substr(0, 10)}...`);\n    localStorage.setItem(\"token\", token);\n  }\n}\n\nfunction getToken() {\n  return localStorage.getItem(\"token\");\n}\n\nfunction removeToken() {\n  localStorage.removeItem(\"token\");\n}\n\nexport { setToken, getToken, removeToken };\n","import axios from \"axios\";\n\nimport { getToken, removeToken } from \"./token\";\n\nconst REACT_APP_API_BASE_URL = \"https://api-gateway-hackathon.herokuapp.com\";\n\nconsole.log(`service/api: Base URL is: ${REACT_APP_API_BASE_URL}`);\n\nconst defaultOptions = {\n  baseURL: REACT_APP_API_BASE_URL,\n  method: \"get\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n    \"Access-Control-Allow-Origin\": \"*\",\n  },\n};\nconst api = axios.create(defaultOptions);\n\n// Set the AUTH token for any request\napi.interceptors.request.use((config) => {\n  const token = getToken();\n  console.log(`service/api: interceptor with token ${token}`);\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\napi.interceptors.response.use(\n  (res) => {\n    console.log(\"res : \", res);\n    return res;\n  },\n  (err) => {\n    if (err.response.status === 401) {\n      removeToken();\n      throw new Error(`Invalid token`);\n    }\n    throw err;\n  }\n);\n\nexport default api;\n","import api from \"./api\";\nimport { getToken, removeToken, setToken } from \"./token\";\n\nconst baseURL = \"/api/authenticationService/\";\n\nfunction login(username, password) {\n  console.log(`service/authentication login ${username}`);\n  console.log(`service/authentication login ${password}`);\n  return api\n    .post(`${baseURL}authenticate`, {\n      username: username,\n      password: password,\n    })\n    .then((response) => {\n      const token = response.data.token;\n      setToken(token);\n      return token;\n    });\n}\n\nfunction logout() {\n  removeToken();\n}\n\nfunction register(username, password) {\n  return api\n    .post(`${baseURL}register`, {\n      username: username,\n      password: password,\n    })\n    .then((response) => {\n      const token = response.data.token;\n      setToken(token);\n      return token;\n    });\n}\n\nfunction isUserLoggedIn() {\n  return !!getToken();\n}\n\nfunction retrieve(username, password) {\n  return api\n    .get(`${baseURL}isAuthenticated`, {\n      username: username,\n      password: password,\n    })\n    .then((response) => response.data);\n}\n\nexport { login, logout, register, isUserLoggedIn, retrieve };\n","export default function Form({ spec, handleChange, handleSubmit }) {\n  return (\n    <div className=\"col-sm\">\n      <h3>{spec.header}</h3>\n      <form>\n        <div className=\"form-group text-left\">\n          <label htmlFor=\"exampleInputEmail1\">Nom d'utilisateur</label>\n          <input\n            type=\"username\"\n            className=\"form-control\"\n            id={spec.userId}\n            aria-describedby=\"usernameHelp\"\n            placeholder=\"Entrez votre nom d'utilisateur\"\n            value={spec.state.username}\n            onChange={handleChange}\n          />\n          <small id=\"usernameHelp\" className=\"form-text text-muted\">\n            Nom d'utilisateur (pas l'email)\n          </small>\n        </div>\n        <div className=\"form-group text-left\">\n          <label htmlFor=\"exampleInputPassword1\">Mot de passe</label>\n          <input\n            type=\"password\"\n            className=\"form-control\"\n            id={spec.passId}\n            placeholder=\"Entrez votre mot de passe\"\n            autoComplete=\"new-password\"\n            value={spec.state.password}\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"form-check\"></div>\n        <button\n          type=\"submit\"\n          className=\"btn btn-primary btn-block\"\n          onClick={handleSubmit}\n        >\n          {spec.btnValue}\n        </button>\n      </form>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport { register, login, isUserLoggedIn } from \"../service/authentication\";\n\nimport Form from \"./Form\";\n\nfunction Account({ setIsLoggedIn }) {\n  const [signinState, setSigninState] = useState({\n    signinUsername: \"\",\n    signinPassword: \"\",\n  });\n\n  const [loginState, setLoginState] = useState({\n    loginUsername: \"\",\n    loginPassword: \"\",\n  });\n\n  const handleChangeSignin = (e) => {\n    const { id, value } = e.target;\n    setSigninState((prevState) => ({\n      ...prevState,\n      [id]: value,\n    }));\n  };\n\n  const handleChangeLogin = (e) => {\n    const { id, value } = e.target;\n    setLoginState((prevState) => ({\n      ...prevState,\n      [id]: value,\n    }));\n  };\n\n  const handleSubmitSignin = (e) => {\n    e.preventDefault();\n    const { signinUsername, signinPassword } = signinState;\n    register(signinUsername, signinPassword)\n      .then((token) => {\n        alert(`Success, your token is: ${token}`);\n        setIsLoggedIn(isUserLoggedIn());\n      })\n      .catch((error) => {\n        alert(`Sorry, there was an error`);\n      });\n    console.log(e);\n  };\n\n  const handleSubmitLogin = (e) => {\n    e.preventDefault();\n    const { loginUsername, loginPassword } = loginState;\n    login(loginUsername, loginPassword)\n      .then((token) => {\n        alert(`Success, your token is: ${token}`);\n        setIsLoggedIn(isUserLoggedIn());\n      })\n      .catch((error) => {\n        alert(`Sorry, there was an error`);\n      });\n    console.log(e);\n  };\n\n  const signSpec = {\n    header: \"Sign In\",\n    userId: Object.keys(signinState)[0],\n    state: signinState,\n    passId: Object.keys(signinState)[1],\n    btnValue: \"Créer un compte\",\n  };\n\n  const logSpec = {\n    header: \"Log In\",\n    userId: Object.keys(loginState)[0],\n    state: loginState,\n    passId: Object.keys(loginState)[1],\n    btnValue: \"Se connecter\",\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <Form\n          spec={signSpec}\n          handleChange={handleChangeSignin}\n          handleSubmit={handleSubmitSignin}\n        />\n        <Form\n          spec={logSpec}\n          handleChange={handleChangeLogin}\n          handleSubmit={handleSubmitLogin}\n        />\n      </div>\n    </div>\n  );\n}\nexport default Account;\n","import { useState } from \"react\";\nimport { sendTask } from \"../service/task\";\n\nfunction Home() {\n  let now = new Date().toISOString();\n  let oneHour = 3600000;\n  console.log(now);\n\n  const [state, setState] = useState({\n    taskName: \"\",\n    dateStart: new Date().toISOString(),\n    dateEnd: \"2021-06-01T01:00\",\n  });\n\n  const handleChange = (e) => {\n    const { id, value } = e.target;\n    setState((prevState) => ({\n      ...prevState,\n      [id]: value,\n    }));\n    // if(id === dateStart){\n    //   setState(dateEnd + 1)\n    // }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const { taskName, dateStart, dateEnd } = state;\n    sendTask(taskName, dateStart, dateEnd).then((data) => {\n      // do smth with data received after sending form\n    });\n  };\n\n  return (\n    <>\n      <p>Home</p>\n      <div className=\"col-sm\">\n        <h3>Ajouter une tâche</h3>\n        <form>\n          <div className=\"form-group text-left\">\n            <label htmlFor=\"inputTache\">Tâche</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              id=\"taskName\"\n              aria-describedby=\"taskNameHelp\"\n              placeholder=\"Entrez une tâche\"\n              value={state.taskName}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-group text-left\">\n            <label htmlFor=\"inputStart\">Date de début</label>\n            <input\n              type=\"datetime-local\"\n              className=\"form-control\"\n              id=\"dateStart\"\n              placeholder=\"Entrez date de début\"\n              min={state.dateStart}\n              max=\"2022-06-01T00:00\"\n              value={state.dateStart}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-group text-left\">\n            <label htmlFor=\"inputEnd\">Date de fin</label>\n            <input\n              type=\"datetime-local\"\n              className=\"form-control\"\n              id=\"dateEnd\"\n              placeholder=\"Entrez date de fin\"\n              min={state.dateEnd}\n              max=\"2022-06-01T00:00\"\n              value={state.dateEnd}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-check\"></div>\n          <button\n            type=\"submit\"\n            className=\"btn btn-primary btn-block\"\n            onClick={handleSubmit}\n          >\n            Ajout de la tâche\n          </button>\n        </form>\n      </div>\n\n      <p>List of Tasks comes here</p>\n    </>\n  );\n}\n\nexport default Home;\n","import api from \"./api\";\n\nfunction sendTask(t, ds, de) {\n  return api\n    .post(\"toBeDetermined\", {\n      t,\n      ds,\n      de,\n    })\n    .then((response) => {\n      console.log(response.data);\n      return response.data;\n    });\n}\n\nexport { sendTask };\n","import { useState } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport Account from \"./components/Account\";\nimport Home from \"./components/Home\";\n\nimport { removeToken } from \"./service/token\";\n\nfunction App() {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  const handleLogout = () => {\n    removeToken();\n    setIsLoggedIn(false);\n  };\n\n  if (!isLoggedIn) {\n    return <Account setIsLoggedIn={setIsLoggedIn} />;\n  }\n\n  return (\n    <div className=\"App\">\n      <button className=\"btn btn-primary\" onClick={handleLogout}>\n        Log Out\n      </button>\n      <Home isLoggedIn={isLoggedIn} />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}