(this["webpackJsonptask-test-react-2"]=this["webpackJsonptask-test-react-2"]||[]).push([[0],{26:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(19),s=a.n(r),o=(a(26),a(3)),i=a(5),l=a(4),d=a(8),u=a.n(d);function j(){return localStorage.getItem("token")}function b(){localStorage.removeItem("token")}var m="https://api-gateway-hackathon.herokuapp.com";console.log("service/api: Base URL is: ".concat(m));var h={baseURL:m,method:"get",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}},p=u.a.create(h);p.interceptors.request.use((function(e){var t=j();return console.log("service/api: interceptor with token ".concat(t)),t&&(e.headers.Authorization="Bearer ".concat(t)),e})),p.interceptors.response.use((function(e){return console.log("res : ",e),e}),(function(e){if(401===e.response.status)throw b(),new Error("Invalid token");throw e}));var O=p;var f=a(0);var x=a(10),v=a.n(x),g=a(20),k=a(21),N="/api/taskService/";var y=function(e){var t=e.tasks,a=Object(n.useState)({}),c=Object(o.a)(a,2),r=c[0],s=c[1],i=Object(n.useRef)(null),l=function(e){(function(e){return O.get("".concat(N,"tasks/").concat(e)).then((function(e){return e.data}))})(e).then((function(e){console.log("response ",e),s(e)}))};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("ul",{children:t.length?t.map((function(e,t){return Object(f.jsxs)("li",{onClick:function(){return l(e.id)},"data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:["the task : ",Object(f.jsx)("b",{children:e.name})," starts at ",Object(f.jsx)("b",{children:e.start})," and ends at"," ",Object(f.jsx)("b",{children:e.end})]},t)})):Object(f.jsx)("p",{children:"No tasks"})}),Object(f.jsx)("div",{className:"modal fade",ref:i,id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(f.jsx)("div",{className:"modal-dialog",children:Object(f.jsxs)("div",{className:"modal-content",children:[Object(f.jsxs)("div",{className:"modal-header",children:[Object(f.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:r.name}),Object(f.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(f.jsxs)("div",{className:"modal-body",children:[Object(f.jsxs)("p",{children:["Date d\xe9but : ",r.start]}),Object(f.jsxs)("p",{children:["Date fin : ",r.end]})]}),Object(f.jsx)("div",{className:"modal-footer",children:Object(f.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Fermer"})})]})})})]})};var S=function(){return Object(f.jsx)("p",{children:"TaskByUserId is to come"})};var w=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),s=Object(o.a)(r,2),d=s[0],j=s[1],b=function(e){return e.toISOString().slice(0,19)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return new Date(new Date(e).setHours(e.getHours()+t))},h=new Date,p=m(h,1),x=Object(n.useState)({taskName:"",dateStart:b(h),dateEnd:b(p)}),w=Object(o.a)(x,2),C=w[0],E=w[1],D=function(e){var t=e.target,a=t.id,n=t.value;if(E((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(i.a)({},a,n))})),"dateStart"===a){var c=b(m(new Date(n)));E((function(e){return Object(l.a)(Object(l.a)({},e),{},{dateEnd:c})})),console.log(c)}},F=function(e){return e.replace("T"," ")};return Object(n.useEffect)((function(){(function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u()("https://api-gateway-hackathon.herokuapp.com/api/taskService/tasks");case 2:t=e.sent,j(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"Home"}),Object(f.jsxs)("div",{className:"col-sm",children:[Object(f.jsx)("h3",{children:"Ajouter une t\xe2che"}),Object(f.jsxs)("form",{children:[Object(f.jsxs)("div",{className:"form-group text-left",children:[Object(f.jsx)("label",{htmlFor:"inputTache",children:"T\xe2che"}),Object(f.jsx)("input",{type:"text",className:"form-control",id:"taskName","aria-describedby":"taskNameHelp",placeholder:"Entrez une t\xe2che",value:C.taskName,onChange:D})]}),Object(f.jsxs)("div",{className:"form-group text-left",children:[Object(f.jsx)("label",{htmlFor:"inputStart",children:"Date de d\xe9but"}),Object(f.jsx)("input",{type:"datetime-local",className:"form-control",id:"dateStart",placeholder:"Entrez date de d\xe9but",min:C.dateStart,max:"2022-06-01T00:00",value:C.dateStart,onChange:D})]}),Object(f.jsxs)("div",{className:"form-group text-left",children:[Object(f.jsx)("label",{htmlFor:"inputEnd",children:"Date de fin"}),Object(f.jsx)("input",{type:"datetime-local",className:"form-control",id:"dateEnd",placeholder:"Entrez date de fin",min:C.dateEnd,max:"2022-06-01T00:00",value:C.dateEnd,onChange:D})]}),Object(f.jsx)("div",{className:"form-check"}),Object(f.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:function(e){e.preventDefault();var t,a,n,c=C.taskName,r=C.dateStart,s=C.dateEnd;(t=c,a=F(r),n=F(s),O.post("".concat(N,"tasks"),{name:t,start:a,end:n}).then((function(e){return e.data}))).then((function(e){j((function(t){return[].concat(Object(k.a)(t),[e])}))}))},children:"Ajout de la t\xe2che"})]})]}),Object(f.jsxs)("div",{className:"container mt-1",children:[["Liste de t\xe2ches","Mes t\xe2ches"].map((function(e,t){return Object(f.jsx)("button",{type:"button",className:"btn btn-primary mr-1",onClick:function(){return c(!a)},children:e},t)})),a?Object(f.jsx)(S,{}):Object(f.jsx)(y,{tasks:d})]})]})};var C=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("button",{className:"btn btn-primary",onClick:function(){b(),c(!1)},children:"Log Out"}),Object(f.jsx)(w,{isLoggedIn:a})]})},E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,48)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(C,{})}),document.getElementById("root")),E()}},[[47,1,2]]]);
//# sourceMappingURL=main.ee5bda88.chunk.js.map