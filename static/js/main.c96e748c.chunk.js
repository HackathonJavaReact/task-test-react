(this["webpackJsonptask-test-react-2"]=this["webpackJsonptask-test-react-2"]||[]).push([[0],{21:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(15),s=n.n(r),o=(n(21),n(5)),i=(n(22),n(4)),l=n(3),d=n(16),u=n.n(d);function j(e){e&&(console.log("service/token setToken ".concat(e.substr(0,10),"...")),localStorage.setItem("token",e))}function b(){return localStorage.getItem("token")}function m(){localStorage.removeItem("token")}var h="https://api-gateway-hackathon.herokuapp.com";console.log("service/api: Base URL is: ".concat(h));var p={baseURL:h,method:"get",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}},O=u.a.create(p);O.interceptors.request.use((function(e){var t=b();return console.log("service/api: interceptor with token ".concat(t)),t&&(e.headers.Authorization="Bearer ".concat(t)),e})),O.interceptors.response.use((function(e){return console.log("res : ",e),e}),(function(e){if(401===e.response.status)throw m(),new Error("Invalid token");throw e}));var g=O,f="/api/authenticationService/";function v(){return!!b()}var x=n(0);function k(e){var t=e.spec,n=e.handleChange,a=e.handleSubmit;return Object(x.jsxs)("div",{className:"col-sm",children:[Object(x.jsx)("h3",{children:t.header}),Object(x.jsxs)("form",{children:[Object(x.jsxs)("div",{className:"form-group text-left",children:[Object(x.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Nom d'utilisateur"}),Object(x.jsx)("input",{type:"username",className:"form-control",id:t.userId,"aria-describedby":"usernameHelp",placeholder:"Entrez votre nom d'utilisateur",value:t.state.username,onChange:n}),Object(x.jsx)("small",{id:"usernameHelp",className:"form-text text-muted",children:"Nom d'utilisateur (pas l'email)"})]}),Object(x.jsxs)("div",{className:"form-group text-left",children:[Object(x.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Mot de passe"}),Object(x.jsx)("input",{type:"password",className:"form-control",id:t.passId,placeholder:"Entrez votre mot de passe",autoComplete:"new-password",value:t.state.password,onChange:n})]}),Object(x.jsx)("div",{className:"form-check"}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:a,children:t.btnValue})]})]})}var S=function(e){var t=e.setIsLoggedIn,n=Object(a.useState)({signinUsername:"",signinPassword:""}),c=Object(o.a)(n,2),r=c[0],s=c[1],d=Object(a.useState)({loginUsername:"",loginPassword:""}),u=Object(o.a)(d,2),b=u[0],m=u[1],h={header:"Sign In",userId:Object.keys(r)[0],state:r,passId:Object.keys(r)[1],btnValue:"Cr\xe9er un compte"},p={header:"Log In",userId:Object.keys(b)[0],state:b,passId:Object.keys(b)[1],btnValue:"Se connecter"};return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)(k,{spec:h,handleChange:function(e){var t=e.target,n=t.id,a=t.value;s((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(i.a)({},n,a))}))},handleSubmit:function(e){e.preventDefault();var n,a,c=r.signinUsername,s=r.signinPassword;(n=c,a=s,g.post("".concat(f,"register"),{username:n,password:a}).then((function(e){var t=e.data.token;return j(t),t}))).then((function(e){alert("Success, your token is: ".concat(e)),t(v())})).catch((function(e){alert("Sorry, there was an error")})),console.log(e)}}),Object(x.jsx)(k,{spec:p,handleChange:function(e){var t=e.target,n=t.id,a=t.value;m((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(i.a)({},n,a))}))},handleSubmit:function(e){e.preventDefault();var n,a,c=b.loginUsername,r=b.loginPassword;(n=c,a=r,console.log("service/authentication login ".concat(n)),console.log("service/authentication login ".concat(a)),g.post("".concat(f,"authenticate"),{username:n,password:a}).then((function(e){var t=e.data.token;return j(t),t}))).then((function(e){alert("Success, your token is: ".concat(e)),t(v())})).catch((function(e){alert("Sorry, there was an error")})),console.log(e)}})]})})};var N=function(){var e=(new Date).toISOString();console.log(e);var t=Object(a.useState)({taskName:"",dateStart:(new Date).toISOString(),dateEnd:"2021-06-01T01:00"}),n=Object(o.a)(t,2),c=n[0],r=n[1],s=function(e){var t=e.target,n=t.id,a=t.value;r((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(i.a)({},n,a))}))};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:"Home"}),Object(x.jsxs)("div",{className:"col-sm",children:[Object(x.jsx)("h3",{children:"Ajouter une t\xe2che"}),Object(x.jsxs)("form",{children:[Object(x.jsxs)("div",{className:"form-group text-left",children:[Object(x.jsx)("label",{htmlFor:"inputTache",children:"T\xe2che"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"taskName","aria-describedby":"taskNameHelp",placeholder:"Entrez une t\xe2che",value:c.taskName,onChange:s})]}),Object(x.jsxs)("div",{className:"form-group text-left",children:[Object(x.jsx)("label",{htmlFor:"inputStart",children:"Date de d\xe9but"}),Object(x.jsx)("input",{type:"datetime-local",className:"form-control",id:"dateStart",placeholder:"Entrez date de d\xe9but",min:c.dateStart,max:"2022-06-01T00:00",value:c.dateStart,onChange:s})]}),Object(x.jsxs)("div",{className:"form-group text-left",children:[Object(x.jsx)("label",{htmlFor:"inputEnd",children:"Date de fin"}),Object(x.jsx)("input",{type:"datetime-local",className:"form-control",id:"dateEnd",placeholder:"Entrez date de fin",min:c.dateEnd,max:"2022-06-01T00:00",value:c.dateEnd,onChange:s})]}),Object(x.jsx)("div",{className:"form-check"}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:function(e){e.preventDefault();var t,n,a,r=c.taskName,s=c.dateStart,o=c.dateEnd;(t=r,n=s,a=o,g.post("toBeDetermined",{t:t,ds:n,de:a}).then((function(e){return console.log(e.data),e.data}))).then((function(e){}))},children:"Ajout de la t\xe2che"})]})]}),Object(x.jsx)("p",{children:"List of Tasks comes here"})]})};var w=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1];return n?Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("button",{className:"btn btn-primary",onClick:function(){m(),c(!1)},children:"Log Out"}),Object(x.jsx)(N,{isLoggedIn:n})]}):Object(x.jsx)(S,{setIsLoggedIn:c})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(w,{})}),document.getElementById("root")),y()}},[[42,1,2]]]);
//# sourceMappingURL=main.c96e748c.chunk.js.map